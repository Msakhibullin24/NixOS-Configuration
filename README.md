# Конфигурация NixOS

Этот репозиторий содержит персональную конфигурацию NixOS, управляемую с помощью Flakes.

## Установка

Установка производится с использованием `disko` для декларативной разметки диска и `nixos-install` для развертывания системы.

**Внимание:** Эта конфигурация рассчитана на установку на диск `/dev/nvme0n1`. Если ваш целевой диск другой, измените путь в файле `disko.nix`.

### Шаг 1: Подготовка

1.  **Загрузитесь с установочного образа NixOS.**
2.  **Подключитесь к интернету** (Ethernet или Wi-Fi). Для Wi-Fi можно использовать команду `nmtui`.
3.  **Переключитесь на пользователя `root`**:
    ```bash
    sudo -i
    ```

### Шаг 2: Клонирование репозитория

Склонируйте этот репозиторий в `/mnt`. Установщик NixOS будет монтировать разделы в эту директорию.

```bash
git clone https://github.com/Msakhibullin24/NixOS-Configuration /mnt
cd /mnt
```

### Шаг 3: Разметка диска

Для разметки диска используется `disko`. Команда ниже отформатирует диск `/dev/nvme0n1` в соответствии с конфигурацией в `disko.nix`.

**ВНИМАНИЕ: ВСЕ ДАННЫЕ НА ДИСКЕ `/dev/nvme0n1` БУДУТ УНИЧТОЖЕНЫ.**

```bash
nix --extra-experimental-features "nix-command flakes" run github:nix-community/disko -- --mode disko ./disko.nix --arg device '"/dev/nvme0n1"'
```

### Шаг 4: Установка системы

После успешной разметки диска, запустите установку NixOS с помощью `nixos-install`, указав flake из вашего локального репозитория.

```bash
nixos-install --flake .#nixos
```

### Шаг 5: Перезагрузка

После завершения установки, перезагрузите систему.

```bash
reboot
```

После перезагрузки вы сможете войти в свежеустановленную систему NixOS.
